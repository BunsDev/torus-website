<!doctype html>
<html>
<head>
    <title>Torus Demo</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script id="facebook-jssdk" src="https://connect.facebook.net/en_US/sdk.js"></script>
</head>

<body style="margin: 0px">
<script>
    window.fbAsyncInit = function() {
        FB.init({
            appId      : '2131832573696080',
            cookie     : true,
            xfbml      : true,
            version    : 'v0.1'
        });
        FB.AppEvents.logPageView();
    };
    function fbLogin() {
        localStorage.removeItem('accessToken')
        localStorage.removeItem('userID')
        FB.login(function(response) {
            localStorage.setItem('accessToken', response.authResponse.accessToken)
            localStorage.setItem('userID', response.authResponse.userID)
        }, {scope: 'email'})
    }
    function validateToken() {
        fetch
    }
    // var nodeList = []
    // for (var i = 0; i < nodeList.length; i++) {
    //     getShare(nodeList[i])
    // }
    // function getShare() {}
</script>
<div style="position: absolute; top: 0px">
    Demo <button id="fbLogin" onclick="fbLogin();">Login to Facebook</button>
</div>
<iframe 
    style="margin-top: 20px"
    id="iframe1"
    title="Inline Frame Example"
    width="1024"
    height="768"
    src="https://www.etheremon.com/">
</iframe>
<script>
    document.getElementById('iframe1').width = window.innerWidth
    document.getElementById('iframe1').height = window.innerHeight - 20
    document.addEventListener('DOMContentLoaded', function(){
        console.log('LOADED', FB)
        var urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('site')) {
            document.getElementById.src = urlParams.get('site')
        }
        // do something
        FB.getLoginStatus(function(response) {
            console.log('GETLOGINSTATUS', response)
        })
    });
//   ;(async function() { 
    // ethereumProvider = metamask.createDefaultProvider()
    // ethQuery = new Eth(ethereumProvider);
    // CONTRACT = new EthContract(ethQuery);
    // contract = CONTRACT(contractAbi, contractByteCode, {from: window.METAMASK_ACCOUNT, gas: 300000});
    // contractInstance = contract.at(contractAddress);
    // accounts = await ethQuery.accounts();
    // window.METAMASK_ACCOUNT = accounts[0] || 'locked'
    // window.addEventListener("message", function(event) {
    //   if (event.origin !== "http://localhost:4000") return 
    //   console.log(msg)
    // }, false) // useCapture explicitly set to false for compatibility
//   })()
</script>
<script src="bundle.js"></script>
</body>
</html>
